{"evaluation_method": "response_level", "evaluation_prompt": "Your task is to check if the Response is accurate to the Evidence.\nGenerate 'Accurate' if the Response is accurate when verified according to the Evidence, or 'Inaccurate' if the Response is inaccurate (contradicts the evidence) or cannot be verified.\n\n**Query**:\\n\\n{{user_request}}\\n\\n**End of Query**\\n\n**Evidence**\\n\\n{{context_document}}\\n\\n**End of Evidence**\\n\n**Response**:\\n\\n{{response}}\\n\\n**End of Response**\\n\nLet's think step-by-step."}
{"evaluation_method": "json_alt", "evaluation_prompt": "You are a helpful and harmless AI assistant. You will be provided with a textual context and a model-generated response.\nYour task is to analyze the response sentence by sentence and classify each sentence according to its relationship with the provided context.\n\n**Instructions:**\n\n1. **Decompose the response into individual sentences.**\n2. **For each sentence, assign one of the following labels:**\n    * **`supported`**: The sentence is entailed by the given context.  Provide a supporting excerpt from the context.\n    * **`unsupported`**: The sentence is not entailed by the given context. Provide an excerpt that is close but does not fully support the sentence.\n    * **`contradictory`**: The sentence is falsified by the given context. Provide a contradicting excerpt from the context.\n    * **`no_rad`**: The sentence does not require factual attribution (e.g., opinions, greetings, questions, disclaimers).  No excerpt is needed for this label.\n\n3. **For each label, provide a short rationale explaining your decision.**  The rationale should be separate from the excerpt.\n\n**Input Format:**\n\nThe input will consist of two parts, clearly separated:\n\n* **Context:**  The textual context used to generate the response.\n* **Response:** The model-generated response to be analyzed.\n\n**Output Format:**\n\nFor each sentence in the response, output a JSON object with the following fields:\n\n* `\"sentence\"`: The sentence being analyzed.\n* `\"label\"`: One of `supported`, `unsupported`, `contradictory`, or `no_rad`.\n* `\"rationale\"`: A brief explanation for the assigned label.\n* `\"excerpt\"`:  A relevant excerpt from the context. Only required for `supported`, `unsupported`, and `contradictory` labels.\n\nOutput each JSON object on a new line.\n\n**Example:**\n\n**Input:**\n\n```\nContext: Apples are red fruits. Bananas are yellow fruits.\n\nResponse: Apples are red. Bananas are green.  Enjoy your fruit!\n```\n\n**Output:**\n\n{\"sentence\": \"Apples are red.\", \"label\": \"supported\", \"rationale\": \"The context explicitly states that apples are red.\", \"excerpt\": \"Apples are red fruits.\"}\n{\"sentence\": \"Bananas are green.\", \"label\": \"contradictory\", \"rationale\": \"The context states that bananas are yellow, not green.\", \"excerpt\": \"Bananas are yellow fruits.\"}\n{\"sentence\": \"Enjoy your fruit!\", \"label\": \"no_rad\", \"rationale\": \"This is a general expression and does not require factual attribution.\", \"excerpt\": null}\n\n**Now, please analyze the following context and response:**\n\n**User Query:**\n{{user_request}}\n\n**Context:**\n{{context_document}}\n\n**Response:**\n{{response}}"}
{"evaluation_method": "json", "evaluation_prompt": "You are a helpful and harmless AI assistant. You will be provided with a textual context and a model-generated response.\nYour task is to analyze the response sentence by sentence and classify each sentence according to its relationship with the provided context.\n\n**Instructions:**\n\n1. **Decompose the response into individual sentences.**\n2. **For each sentence, assign one of the following labels:**\n    * **`supported`**: The sentence is entailed by the given context.  Provide a supporting excerpt from the context. The supporting except must *fully* entail the sentence. If you need to cite multiple supporting excepts, simply concatenate them.\n    * **`unsupported`**: The sentence is not entailed by the given context. No excerpt is needed for this label.\n    * **`contradictory`**: The sentence is falsified by the given context. Provide a contradicting excerpt from the context.\n    * **`no_rad`**: The sentence does not require factual attribution (e.g., opinions, greetings, questions, disclaimers).  No excerpt is needed for this label.\n3. **For each label, provide a short rationale explaining your decision.**  The rationale should be separate from the excerpt.\n4. **Be very strict with your `supported` and `contradictory` decisions.** Unless you can find straightforward, indisputable evidence excerpts *in the context* that a sentence is `supported` or `contradictory`, consider it `unsupported`. You should not employ world knowledge unless it is truly trivial.\n\n**Input Format:**\n\nThe input will consist of two parts, clearly separated:\n\n* **Context:**  The textual context used to generate the response.\n* **Response:** The model-generated response to be analyzed.\n\n**Output Format:**\n\nFor each sentence in the response, output a JSON object with the following fields:\n\n* `\"sentence\"`: The sentence being analyzed.\n* `\"label\"`: One of `supported`, `unsupported`, `contradictory`, or `no_rad`.\n* `\"rationale\"`: A brief explanation for the assigned label.\n* `\"excerpt\"`:  A relevant excerpt from the context. Only required for `supported` and `contradictory` labels.\n\nOutput each JSON object on a new line.\n\n**Example:**\n\n**Input:**\n\n```\nContext: Apples are red fruits. Bananas are yellow fruits.\n\nResponse: Apples are red. Bananas are green. Bananas are cheaper than apples. Enjoy your fruit!\n```\n\n**Output:**\n\n{\"sentence\": \"Apples are red.\", \"label\": \"supported\", \"rationale\": \"The context explicitly states that apples are red.\", \"excerpt\": \"Apples are red fruits.\"}\n{\"sentence\": \"Bananas are green.\", \"label\": \"contradictory\", \"rationale\": \"The context states that bananas are yellow, not green.\", \"excerpt\": \"Bananas are yellow fruits.\"}\n{\"sentence\": \"Bananas are cheaper than apples.\", \"label\": \"unsupported\", \"rationale\": \"The context does not mention the price of bananas or apples.\", \"excerpt\": null}\n{\"sentence\": \"Enjoy your fruit!\", \"label\": \"no_rad\", \"rationale\": \"This is a general expression and does not require factual attribution.\", \"excerpt\": null}\n\n**Now, please analyze the following context and response:**\n\n**User Query:**\n{{user_request}}\n\n**Context:**\n{{context_document}}\n\n**Response:**\n{{response}}"}
{"evaluation_method": "json_with_double_check", "evaluation_prompt": "Your task is to verify whether a given sentence is entailed by a given context or not. Answer only in YES or NO without any additional text. Do not try to avoid answering, or apologize, or give any answer that isn't simply YES or NO.\n\n**Sentence**\n{{json_dict[\"sentence\"]}}\n\n**Context**\n{{json_dict[\"excerpt\"]}}"}
{"evaluation_method": "span_level", "evaluation_prompt": "Your task is to check if a specific Span is accurate to the Evidence.\nGenerate 'Accurate' if the Span is accurate when verified according to the Evidence or when there is nothing to verify in the Span.\nGenerate 'Inaccurate' if the Span is inaccurate (contradicts the evidence), or cannot be verified.\n\n**Query**:\\n\\n{{user_request}}\\n\\n**End of Query**\\n\n**Evidence**\\n\\n{{context_document}}\\n\\n**End of Evidence**\\n\n**Response**:\\n\\n{{response}}\\n\\n**End of Response**\\n\n\nYou are currently verifying **Span {{ix+1}}** from the Response.\n**Span {{ix+1}}**:\\n\\n{{span}}\\n\\n**End of Span {{ix+1}}**\\n\n\nIs Span {{ix+1}} accurate or inaccurate when verified according to the Evidence? Point to where in the evidence justifies your answer."}
{"evaluation_method": "implicit_span_level", "evaluation_prompt": "Your task is to check if the Response is accurate to the Evidence.\nGenerate 'Accurate' if the Response is accurate when verified according to the Evidence, or 'Inaccurate' if the Response is inaccurate (contradicts the evidence) or cannot be verified.\n\n**Query**:\\n\\n{{user_request}}\\n\\n**End of Query**\\n\n**Evidence**\\n\\n{{context_document}}\\n\\n**End of Evidence**\\n\n**Response**:\\n\\n{{response}}\\n\\n**End of Response**\\n\n\nBreak down the Response into sentences and classify each one separately, then give the final answer: If even one of the sentences is inaccurate, then the Response is inaccurate.\n\nFor example, your output should be of this format:\nSentence 1: <Sentence 1>\nSentence 1 label: Accurate/Inaccurate (choose 1)\nSentence 2: <Sentence 2>\nSentence 2 label: Accurate/Inaccurate (choose 1)\nSentence 3: <Sentence 3>\nSentence 3 label: Accurate/Inaccurate (choose 1)\n[...]\nFinal Answer: Accurate/Inaccurate (choose 1)"}
{"evaluation_method": "ineligible_responses_filter_with_context", "evaluation_prompt": "Your mission is to judge the response from an AI model, the *test* response, calibrating your judgement using a *baseline* response.\nPlease use the following rubric criteria to judge the responses:\n\n<START OF RUBRICS>\nYour task is to analyze the test response based on the criterion of \"Instruction Following\". Start your analysis with \"Analysis\".\n\n**Instruction Following**\nPlease first list the instructions in the user query.\nIn general, an instruction is VERY important if it is specifically asked for in the prompt and deviates from the norm. Please highlight such specific keywords.\nYou should also derive the task type from the user query and include the task-specific implied instructions.\nSometimes, no instruction is available in the user query.\nIt is your job to infer if the instruction is to autocomplete the user query or is asking the LLM for follow-ups.\nAfter listing the instructions, you should rank them in order of importance.\nAfter that, INDEPENDENTLY check if the test response and the baseline response meet each of the instructions.\nYou should itemize, for each instruction, whether the response meets, partially meets, or does not meet the requirement, using reasoning.\nYou should start reasoning first before reaching a conclusion about whether the response satisfies the requirement.\nCiting examples while reasoning is preferred.\n\nReflect on your answer and consider the possibility that you are wrong.\nIf you are wrong, explain clearly what needs to be clarified, improved, or changed in the rubric criteria and guidelines.\n\nIn the end, express your final verdict as one of the following three json objects:\n\n```json\n{{\n  \"Instruction Following\": \"No Issues\"\n}}\n```\n\n```json\n{{\n  \"Instruction Following\": \"Minor Issue(s)\"\n}}\n```\n\n```json\n{{\n  \"Instruction Following\": \"Major Issue(s)\"\n}}\n```\n\n<END OF RUBRICS>\n\n# Your task\n## User query\n<|begin_of_query|>\n{{full_prompt}}\n<|end_of_query|>\n\n## Test Response:\n<|begin_of_test_response|>\n{{response_a}}\n<|end_of_test_response|>\n\n## Baseline Response:\n<|begin_of_baseline_response|>\n{{response_b}}\n<|end_of_baseline_response|>\n\nPlease write your analysis and final verdict for the test response."}
{"evaluation_method": "ineligible_responses_filter_no_context", "evaluation_prompt": "Your mission is to judge the response from an AI model, the *test* response, calibrating your judgement using a *baseline* response.\nPlease use the following rubric criteria to judge the responses:\n\n<START OF RUBRICS>\nYour task is to analyze the test response based on the criterion of \"Instruction Following\". Start your analysis with \"Analysis\".\n\n**Instruction Following**\nPlease first list the instructions in the user query.\nIn general, an instruction is VERY important if it is specifically asked for in the prompt and deviates from the norm. Please highlight such specific keywords.\nYou should also derive the task type from the user query and include the task-specific implied instructions.\nSometimes, no instruction is available in the user query.\nIt is your job to infer if the instruction is to autocomplete the user query or is asking the LLM for follow-ups.\nAfter listing the instructions, you should rank them in order of importance.\nAfter that, INDEPENDENTLY check if the test response and the baseline response meet each of the instructions.\nYou should itemize, for each instruction, whether the response meets, partially meets, or does not meet the requirement, using reasoning.\nYou should start reasoning first before reaching a conclusion about whether the response satisfies the requirement.\nCiting examples while reasoning is preferred.\n\nReflect on your answer and consider the possibility that you are wrong.\nIf you are wrong, explain clearly what needs to be clarified, improved, or changed in the rubric criteria and guidelines.\n\nIn the end, express your final verdict as one of the following three json objects:\n\n```json\n{{\n  \"Instruction Following\": \"No Issues\"\n}}\n```\n\n```json\n{{\n  \"Instruction Following\": \"Minor Issue(s)\"\n}}\n```\n\n```json\n{{\n  \"Instruction Following\": \"Major Issue(s)\"\n}}\n```\n\n<END OF RUBRICS>\n\n# Your task\n## User query\n<|begin_of_query|>\n{{user_request}}\n<|end_of_query|>\n\n## Test Response:\n<|begin_of_test_response|>\n{{response_a}}\n<|end_of_test_response|>\n\n## Baseline Response:\n<|begin_of_baseline_response|>\n{{response_b}}\n<|end_of_baseline_response|>\n\nPlease write your analysis and final verdict for the test response."}
